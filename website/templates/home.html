{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
  <h1 align="center">Your Watchlist</h1>

  <ul class="list-group list-group-flush" id="watchlist">
    {% for item in watchlist %}
      <li class="list-group-item">
        <strong>{{ item.show.title }}</strong> ({{ item.show.genre }}, {{ item.show.release_year }})
        - Status: {{ item.status }}
        <form action="/delete-watchlist/{{ item.id }}" method="POST" class="inline-form">
          <button type="submit" class="close" title="Remove from Watchlist">
            <span aria-hidden="true">&times;</span>
          </button>
        </form>
        <form action="/update-watchlist/{{ item.id }}" method="POST" class="inline-form">
          <label for="status_{{ item.id }}" class="sr-only">Status</label>
          <select name="status" id="status_{{ item.id }}" title="Update watch status">
            <option value="Watching" {% if item.status == 'Watching' %}selected{% endif %}>Watching</option>
            <option value="Watched" {% if item.status == 'Watched' %}selected{% endif %}>Watched</option>
            <option value="Planned" {% if item.status == 'Planned' %}selected{% endif %}>Planned</option>
          </select>
          <button type="submit" class="btn btn-sm btn-primary">Update</button>
        </form>
      </li>
    {% endfor %}
  </ul>

  <form method="POST" action="/add-show">
    <label for="title">Title:</label>
    <input type="text" name="title" id="title" class="form-control" required>

    <label for="genre">Genre:</label>
    <select name="genre" id="genre" class="form-control" title="Select the genre of the show">
      <option value="Action">Action</option>
      <option value="Comedy">Comedy</option>
      <option value="Drama">Drama</option>
      <option value="Fantasy">Fantasy</option>
      <option value="Horror">Horror</option>
      <option value="Romance">Romance</option>
      <option value="Sci-Fi">Sci-Fi</option>
      <!-- Add more genres as needed -->
    </select>

    <label for="release_year">Release Year:</label>
    <input type="number" name="release_year" id="release_year" class="form-control" min="1900" max="{{ current_year }}" placeholder="Enter or select year">

    <label for="rating">Rate the Show (1 to 10):</label>
    <input type="range" name="rating" id="rating" class="form-range" min="1" max="10" step="1" value="5" oninput="this.nextElementSibling.value = this.value">
    <output>5</output>

    <label for="description">Description (optional):</label>
    <textarea name="description" id="description" class="form-control" rows="3" placeholder="Write a short description..."></textarea>

    <br />
    <div align="center">
      <button type="submit" class="btn btn-primary">Add Show</button>
    </div>
  </form>
{% endblock %}
