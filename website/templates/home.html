{% extends "base.html" %}
{% block title %}Home{% endblock %}

{% block content %}
  <h1 align="center">Your Watchlist</h1>
  
  <ul class="list-group list-group-flush" id="watchlist">
    {% for item in watchlist %}
      <li class="list-group-item">
        <strong>{{ item.show.title }}</strong> ({{ item.show.genre }}, {{ item.show.release_year }})
        - Status: {{ item.status }}
        <form action="/delete-watchlist/{{ item.id }}" method="POST" class="inline-form">
          <button type="submit" class="close" title="Remove from Watchlist">
            <span aria-hidden="true">&times;</span>
          </button>
        </form>
        <form action="/update-watchlist/{{ item.id }}" method="POST" class="inline-form">
          <label for="status-{{ item.id }}" class="sr-only">Update Status</label> <!-- Added label for accessibility -->
          <select name="status" id="status-{{ item.id }}" title="Update Watch Status"> <!-- Added title attribute for accessibility -->
            <option value="Watching" {% if item.status == 'Watching' %}selected{% endif %}>Watching</option>
            <option value="Watched" {% if item.status == 'Watched' %}selected{% endif %}>Watched</option>
            <option value="Planned" {% if item.status == 'Planned' %}selected{% endif %}>Planned</option>
          </select>
          <button type="submit" class="btn btn-sm btn-primary">Update</button>
        </form>
      </li>
    {% endfor %}
  </ul>

  <form method="POST" action="/add-show">
    <label for="title">Title:</label>
    <input type="text" name="title" id="title" class="form-control">
    
    <label for="genre">Genre:</label>
    <input type="text" name="genre" id="genre" class="form-control">
    
    <label for="release_year">Release Year:</label>
    <input type="number" name="release_year" id="release_year" class="form-control">
    
    <br />
    <div align="center">
      <button type="submit" class="btn btn-primary">Add Show</button>
    </div>
  </form>
{% endblock %}
